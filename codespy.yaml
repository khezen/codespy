# codespy.yaml - Configuration file for codespy
#
# ENVIRONMENT VARIABLE OVERRIDES:
# All settings can be overridden via environment variables.
# - Flat values: <KEY> (e.g., OUTPUT_FORMAT=json, DEFAULT_MODEL=gpt-4o)
# - Signature values: <SIGNATURE>_<KEY>
#   Examples:
#     CODE_SECURITY_MAX_ITERS=15
#     CODE_SECURITY_ENABLED=false
#     SUPPLY_CHAIN_MODEL=gpt-4-turbo
#     BUG_DETECTION_MAX_ITERS=10
#
# Priority: Environment Variables > YAML Config > Defaults

# ============================================================================
# LLM ACCESS
# ============================================================================
llm:
  # OpenAI
  openai_api_key: null                   # OPENAI_API_KEY
  openai_api_base: null                  # OPENAI_API_BASE

  # Anthropic
  anthropic_api_key: null                # ANTHROPIC_API_KEY

  # Google Gemini
  gemini_api_key: null                   # GEMINI_API_KEY

  # AWS Bedrock
  aws_region: us-east-1                  # AWS_REGION
  aws_access_key_id: null                # AWS_ACCESS_KEY_ID
  aws_secret_access_key: null            # AWS_SECRET_ACCESS_KEY
  aws_profile: null                      # AWS_PROFILE

  # Azure OpenAI
  azure_api_key: null                    # AZURE_API_KEY
  azure_api_base: null                   # AZURE_API_BASE
  azure_api_version: null                # AZURE_API_VERSION

# ============================================================================
# GITHUB
# ============================================================================
github:
  token: null                            # GITHUB_TOKEN (auto-discovered if not set)

# ============================================================================
# SIGNATURES
# ============================================================================
# Each signature config supports: enabled, max_iters, model, max_context_size
# Set to null to use defaults

# These apply to all signatures unless overridden per-signature
default_model: gpt-4o                    # DEFAULT_MODEL
default_max_iters: 3                     # DEFAULT_MAX_ITERS
default_max_context_size: 50000          # DEFAULT_MAX_CONTEXT_SIZE

signatures:
  # Security Auditor signatures
  code_security:
    enabled: true                        # CODE_SECURITY_ENABLED
    max_iters: null                      # CODE_SECURITY_MAX_ITERS
    model: null                          # CODE_SECURITY_MODEL
    max_context_size: null               # CODE_SECURITY_MAX_CONTEXT_SIZE

  supply_chain:
    enabled: true                        # SUPPLY_CHAIN_ENABLED
    max_iters: 5                         # SUPPLY_CHAIN_MAX_ITERS
    model: null                          # SUPPLY_CHAIN_MODEL
    max_context_size: null               # SUPPLY_CHAIN_MAX_CONTEXT_SIZE

  # Bug Detector signature
  bug_detection:
    enabled: true                        # BUG_DETECTION_ENABLED
    max_iters: null                      # BUG_DETECTION_MAX_ITERS
    model: null                          # BUG_DETECTION_MODEL
    max_context_size: null               # BUG_DETECTION_MAX_CONTEXT_SIZE

  # Doc Reviewer signature
  doc_review:
    enabled: true                        # DOC_REVIEW_ENABLED
    max_iters: null                      # DOC_REVIEW_MAX_ITERS
    model: null                          # DOC_REVIEW_MODEL
    max_context_size: null               # DOC_REVIEW_MAX_CONTEXT_SIZE

  # Domain Expert signature
  domain_analysis:
    enabled: true                       # DOMAIN_ANALYSIS_ENABLED
    max_iters: 6                      # DOMAIN_ANALYSIS_MAX_ITERS
    model: null                          # DOMAIN_ANALYSIS_MODEL
    max_context_size: null               # DOMAIN_ANALYSIS_MAX_CONTEXT_SIZE

  # Scope Identifier signature
  scope_identification:
    enabled: true                        # SCOPE_IDENTIFICATION_ENABLED
    max_iters: 10                        # SCOPE_IDENTIFICATION_MAX_ITERS
    model: null                          # SCOPE_IDENTIFICATION_MODEL
    max_context_size: null               # SCOPE_IDENTIFICATION_MAX_CONTEXT_SIZE

  # Deduplicator signature
  deduplication:
    enabled: true                        # DEDUPLICATION_ENABLED
    model: gpt-3.5-turbo                 # DEDUPLICATION_MODEL
    max_context_size: null               # DEDUPLICATION_MAX_CONTEXT_SIZE

  # Summarizer signature
  summarization:
    enabled: true                        # SUMMARIZATION_ENABLED
    model: gpt-3.5-turbo                 # SUMMARIZATION_MODEL
    max_context_size: null               # SUMMARIZATION_MAX_CONTEXT_SIZE

# ============================================================================
# OUTPUT
# ============================================================================
output_format: markdown                  # OUTPUT_FORMAT (markdown | json)
cache_dir: ~/.cache/codespy              # CACHE_DIR

# ============================================================================
# FILE EXCLUSIONS
# ============================================================================
exclude_patterns:                        # EXCLUDE_PATTERNS (JSON array in env)
  - vendor/
  - node_modules/
  - third_party/
  - external/
  - deps/
  - .bundle/
  - Pods/
  - Carthage/
  - bower_components/
  - jspm_packages/
  - _vendor/
  - vendored/

include_vendor: false                    # INCLUDE_VENDOR